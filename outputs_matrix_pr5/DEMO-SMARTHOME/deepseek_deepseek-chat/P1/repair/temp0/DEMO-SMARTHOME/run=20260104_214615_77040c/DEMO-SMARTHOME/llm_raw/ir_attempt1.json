{
  "app_name": "smart_home_security_automation",
  "version": "1.0",
  "components": [
    {
      "id": "door_sensor_main",
      "type": "data_source",
      "capabilities": [
        "sense",
        "collect"
      ],
      "metadata": {
        "logical_role": "door_state_provider"
      }
    },
    {
      "id": "motion_sensor_living",
      "type": "data_source",
      "capabilities": [
        "sense",
        "collect"
      ],
      "metadata": {
        "logical_role": "motion_state_provider"
      }
    },
    {
      "id": "smart_light_living",
      "type": "actuator",
      "capabilities": [
        "actuate"
      ],
      "metadata": {
        "logical_role": "light_controller"
      }
    },
    {
      "id": "edge_gateway_ha",
      "type": "controller",
      "capabilities": [
        "aggregate",
        "analyze",
        "decide"
      ],
      "metadata": {
        "logical_role": "edge_automation_engine"
      }
    },
    {
      "id": "cloud_automation_service",
      "type": "controller",
      "capabilities": [
        "analyze",
        "decide",
        "notify"
      ],
      "metadata": {
        "logical_role": "cloud_rule_engine_and_notifier"
      }
    },
    {
      "id": "cloud_storage_service",
      "type": "storage",
      "capabilities": [
        "store",
        "query"
      ],
      "metadata": {
        "logical_role": "history_and_state_storage"
      }
    }
  ],
  "links": [
    {
      "id": "door_state_to_edge",
      "from": "door_sensor_main",
      "to": "edge_gateway_ha",
      "data_type": "sensor_reading",
      "contract": {
        "logical_schema": "door_open_close_state"
      },
      "frequency": "real-time"
    },
    {
      "id": "motion_state_to_edge",
      "from": "motion_sensor_living",
      "to": "edge_gateway_ha",
      "data_type": "sensor_reading",
      "contract": {
        "logical_schema": "motion_detection_state"
      },
      "frequency": "real-time"
    },
    {
      "id": "edge_light_command",
      "from": "edge_gateway_ha",
      "to": "smart_light_living",
      "data_type": "command",
      "contract": {
        "logical_schema": "light_on_off_command"
      },
      "frequency": "on-demand"
    },
    {
      "id": "edge_events_to_cloud",
      "from": "edge_gateway_ha",
      "to": "cloud_automation_service",
      "data_type": "event",
      "contract": {
        "logical_schema": "aggregated_security_event"
      },
      "frequency": "real-time"
    },
    {
      "id": "cloud_notification_command",
      "from": "cloud_automation_service",
      "to": "cloud_automation_service",
      "data_type": "command",
      "contract": {
        "logical_schema": "user_notification"
      },
      "frequency": "on-demand"
    },
    {
      "id": "cloud_event_to_storage",
      "from": "cloud_automation_service",
      "to": "cloud_storage_service",
      "data_type": "event",
      "contract": {
        "logical_schema": "time_series_event_record"
      },
      "frequency": "periodic"
    },
    {
      "id": "cloud_query_to_storage",
      "from": "cloud_automation_service",
      "to": "cloud_storage_service",
      "data_type": "query",
      "contract": {
        "logical_schema": "history_state_query"
      },
      "frequency": "on-demand"
    }
  ],
  "logic": {
    "modes": {
      "home_mode": {
        "description": "在家模式：夜间人体感应开灯",
        "rules": [
          {
            "condition": "time_window(22:00-06:00) AND motion_detected",
            "action": "turn_on_light"
          },
          {
            "condition": "no_motion_for(5_minutes)",
            "action": "turn_off_light"
          }
        ]
      },
      "away_mode": {
        "description": "离家模式：任何门磁触发均告警",
        "rules": [
          {
            "condition": "door_state_changed",
            "action": "send_immediate_notification"
          },
          {
            "condition": "motion_detected",
            "action": "send_high_priority_alert"
          }
        ]
      },
      "security_mode": {
        "description": "安防模式：双重传感器联动",
        "rules": [
          {
            "condition": "door_opened AND motion_detected",
            "action": "trigger_alarm_and_record"
          },
          {
            "condition": "consecutive_anomalies",
            "action": "notify_emergency_contact"
          }
        ]
      }
    },
    "fault_tolerance": {
      "sensor_offline": "use_backup_policy",
      "fallback_strategy": "degrade_gracefully"
    }
  },
  "metadata": {
    "description": "智能家居安防自动化系统IR，实现门磁与人体传感器联动照明、异常通知及多模式安防策略。",
    "category": "smart_home_automation",
    "priority": "high"
  }
}