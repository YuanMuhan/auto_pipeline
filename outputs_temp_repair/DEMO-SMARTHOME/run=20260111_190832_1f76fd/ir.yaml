app_name: automation_app
components:
- capabilities:
  - detect_open_close
  - collect
  id: door_sensor_main
  type: data_source
- capabilities:
  - detect_motion
  - collect
  id: motion_sensor_living
  type: data_source
- capabilities:
  - turn_on_off
  id: smart_light_living
  type: actuator
- capabilities:
  - event_bus
  - state_management
  id: edge_gateway_ha
  type: RuleEngine
- capabilities:
  - rule_engine
  - notification
  id: cloud_automation_service
  type: RuleEngine
- capabilities:
  - data_storage
  - query
  id: cloud_storage_service
  type: storage
description: 智能家居安防自动化系统：门磁和人体传感器联动夜间照明，异常情况实时通知，支持离家模式和安防策略
links:
- data_type: event
  frequency: real-time
  from: door_sensor_main
  id: door_sensor_to_gateway
  to: edge_gateway_ha
- data_type: event
  frequency: real-time
  from: motion_sensor_living
  id: motion_sensor_to_gateway
  to: edge_gateway_ha
- data_type: command
  frequency: real-time
  from: edge_gateway_ha
  id: gateway_to_cloud_service
  to: cloud_automation_service
- data_type: data
  frequency: periodic
  from: cloud_automation_service
  id: cloud_service_to_storage
  to: cloud_storage_service
- data_type: command
  frequency: real-time
  from: cloud_automation_service
  id: cloud_service_to_light
  to: smart_light_living
logic:
  away_mode:
    description: 离家模式：任何门磁触发均告警
    rules:
    - action: send_notification
      condition: door_sensor_triggered
    - action: send_high_priority_alert
      condition: motion_sensor_triggered
  home_mode:
    description: 在家模式：夜间人体感应开灯
    rules:
    - action: turn_on_light
      condition: time_between
      parameters:
        end: 06:00
        start: '22:00'
    - action: turn_off_light
      condition: no_motion_for
      parameters:
        duration: 5_minutes
  security_mode:
    description: 安防模式：双重传感器联动
    rules:
    - action: trigger_alarm
      condition: door_open_and_motion_detected
metadata:
  description: 智能家居安防自动化系统 IR
  version: '1.0'
policies: []
schemas: []
version: 0.1.0
