app_name: automation_app
component_bindings:
- bindings: []
  component: door_sensor_main
  is_stub: true
  need_impl: true
- bindings: []
  component: motion_sensor_living
  is_stub: true
  need_impl: true
- bindings: []
  component: smart_light_living
  is_stub: true
  need_impl: true
- bindings: []
  component: edge_gateway_ha
  is_stub: true
  need_impl: true
- bindings: []
  component: cloud_automation_service
  is_stub: true
  need_impl: true
- bindings: []
  component: cloud_storage_service
  is_stub: true
  need_impl: true
deployment:
  orchestrator: docker-compose
endpoints:
- from_endpoint: ha://local
  link_id: door_sensor_to_gateway
  to_endpoint: mqtt://ha_broker/homeassistant/commands
- from_endpoint: ha://local
  link_id: motion_sensor_to_gateway
  to_endpoint: mqtt://ha_broker/homeassistant/commands
- from_endpoint: mqtt://ha_broker/homeassistant/commands
  link_id: gateway_to_cloud_service
  to_endpoint: https://<SECRET_CLOUD_API>/api/v1/events
- from_endpoint: https://<SECRET_CLOUD_API>/api/v1/events
  link_id: cloud_service_to_storage
  to_endpoint: https://<SECRET_CLOUD_DB>/write?db=smarthome&precision=s
- from_endpoint: https://<SECRET_CLOUD_API>/api/v1/events
  link_id: cloud_service_to_light
  to_endpoint: http://<SECRET_HA_HOST>:8123/api/services/light/turn_on
placements:
- component_id: door_sensor_main
  device_ref: door_sensor_main
  layer: device
- component_id: motion_sensor_living
  device_ref: motion_sensor_living
  layer: device
- component_id: edge_gateway_ha
  device_ref: edge_gateway_ha
  layer: edge
- component_id: cloud_automation_service
  device_ref: cloud_automation_service
  layer: cloud
- component_id: cloud_storage_service
  device_ref: cloud_storage_service
  layer: cloud
- component_id: smart_light_living
  device_ref: smart_light_living
  layer: device
transports:
- link_id: door_sensor_to_gateway
  protocol: MQTT
  qos: at_least_once
- link_id: motion_sensor_to_gateway
  protocol: MQTT
  qos: at_least_once
- link_id: gateway_to_cloud_service
  protocol: HTTP
  qos: best_effort
- link_id: cloud_service_to_storage
  protocol: HTTP
  qos: best_effort
- link_id: cloud_service_to_light
  protocol: HTTP
  qos: best_effort
version: 0.1.0
