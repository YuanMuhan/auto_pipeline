placements:
  - component_id: temp_sensor_01
    layer: device
    device_ref: temp_sensor_01
  - component_id: edge_gateway_01
    layer: edge
    device_ref: edge_gateway_01
  - component_id: cloud_server_01
    layer: cloud
    device_ref: cloud_server_01
  - component_id: alert_notifier
    layer: cloud
    device_ref: cloud_server_01
  - component_id: monitoring_controller
    layer: cloud
    device_ref: cloud_server_01

transports:
  - link_id: sensor_to_edge
    protocol: MQTT
    qos: at_least_once
  - link_id: edge_to_cloud
    protocol: HTTP
    qos: best_effort
  - link_id: cloud_to_notifier
    protocol: HTTP
    qos: best_effort
  - link_id: controller_to_edge
    protocol: HTTP
    qos: best_effort
  - link_id: edge_to_controller
    protocol: HTTP
    qos: best_effort

endpoints:
  - link_id: sensor_to_edge
    from_endpoint: mqtt://broker/publish/sensors/temp_sensor_01/data
    to_endpoint: mqtt://broker/subscribe/sensors/temp_sensor_01/data
  - link_id: edge_to_cloud
    from_endpoint: https://<SECRET_CLOUD_API>/ingest
    to_endpoint: https://<SECRET_CLOUD_API>/ingest
  - link_id: cloud_to_notifier
    from_endpoint: https://<SECRET_CLOUD_API>/api
    to_endpoint: https://<SECRET_CLOUD_API>/api
  - link_id: controller_to_edge
    from_endpoint: https://<SECRET_CLOUD_API>/api
    to_endpoint: https://<SECRET_CLOUD_API>/ingest
  - link_id: edge_to_controller
    from_endpoint: https://<SECRET_CLOUD_API>/ingest
    to_endpoint: https://<SECRET_CLOUD_API>/api

deployment:
  orchestrator: docker-compose